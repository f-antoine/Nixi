# Table of contents
- [Table of contents](#table-of-contents)
- [Introduction](#introduction)
- [License](#license)
- [About the project](#about-the-project)
- [Features](#features)
- [Getting Started](#getting-started)
	- [From Github Releases](#from-github-releases)
	- [From Unity Asset Store](#from-unity-asset-store)
	- [From Sources](#from-sources)
		- [Create first project named Nixi](#create-first-project-named-nixi)
		- [Create second project named NixiTestTools](#create-second-project-named-nixitesttools)
		- [Clone repository to get source code](#clone-repository-to-get-source-code)
		- [Add references](#add-references)
		- [Build dll](#build-dll)
	- [Install DLLs](#install-dlls)
	- [Check installation](#check-installation)
- [How to use](#how-to-use)
# Introduction

Nixi is a library that was designed primarily to approach the principles of clean coding and to simplify writing tests when developing on Unity using Unity dependency injection as well as the more classic dependency injection.

It makes it easier to write and test classes derived from MonoBehaviour class while keeping the principles of encapsulation to be able to expose only what needs to be exposed.

There are specific field decorators (named Nixi attributes), with which it is possible to inject according to two different approaches :
- From Unity dependency injection systems such as : GetComponent, GetComponentInChildren, etc.
- From a simple IOC container (NixiContainer) filled in advance from a class that takes priority over the others.

The Nixi attributes are intended to be used during **play mode scene** and can also be reused in tests to follow the evolution of these fields and/or mock where it is useful, including non-public fields.

These reuses and accesses during testing are intended to simulate and verify Unity context (GetComponent, GetComponentInChildren, etc.), as well as to mock interfaces that have been decorated for the injections from NixiContainer or to mock any field decorated with SerializeField. This is only allowed for these cases, no others.

# License

Nixi is an open source project under the MIT license.

See the [**License.md**](License.md) file for more information.

# About the project

I hope that Nixi could be useful to some people, I pushed the development until the end of what I consider as a first version usable for my projects and I have decided to share it in open source.

I use Unity regularly and I created Nixi to meet most of the needs I encountered in order to be able to approach a slightly cleaner code while respecting what I learned in the software world. I don't claim to know everything about Unity or clean code.

Since English is not my native language, I have tried my best to make something understandable and usable, I am open to improving/updating Nixi and its documentation at any time.

# Features

- Create a class derived from MonoBehaviourInjectable class (derived from MonoBehaviour, handling dependency injection during the Awake call) that can be agenced and tested more easily without exposing all the variables.
- No need to SerializeField many fields and/or write workarounds to test the code, Nixi decorators are used to replicate the Unity dependency injection behaviours based on your settings and a test template is provided to identify these parameters and simulate situations without having to launch scenes for testing.
- Unity dependency injection can be used to directly search for components that implement an interface instead of an implementation, it is also possible to work on interfaces with Nixi decorators to find these Unity components.
- A simple container (NixiContainer) is provided in this library, to map singletons and transients, allowing you to inject an implementation generated by this container into an interface field that is not primarily about Unity components.
- It is possible to register elements from the scene in the NixiContainer to reduce the back and forth between the scene and the code and thus be able to focus on the essentials.
    > E.g : you can pass all ScriptableObjects concerning monsters in a SO_MonsterContainer class, then register it in the NixiContainer and call it from other locations, this avoids loading everything from the resources folder or other approaches that could cost machine resources.

# Getting Started

You can get and use Nixi DLLs with any of the following approaches :

## From Github Releases

https://github.com/f-antoine/Nixi/releases

You can download the latest version, then refers to [Install DLLs part](#install-dlls).

## From Unity Asset Store

https://assetstore.unity.com/packages/slug/211025

You can download the package, import it into your Unity project, then refers to [Install DLLs part](#install-dlls).

In this package you can find a scene that shows a simple example of use, but to use Nixi in your project you only need the **Plugins/Nixi folder**.

## From Sources

### Create first project named Nixi

1) Open Visual Studio
2) Create a new project
3) Select C# .NET Class Library template
4) Name it **Nixi** and choose the PROJECT_PATH location you want
5) In Framework window choose **.Net Standard 2.0**, this will cover most Unity projects compabitility
    
    5.1 You can only use **.Net Standard 2.1** if you have configured **.Net 4.x** in Unity in :

        -> Edit/Project Settings
			-> "Player" tab
				-> "Other Settings" part
					-> Api Compatibility Level to .Net 4.x

6) Click on create button, the solution is now opened

### Create second project named NixiTestTools

7) Add a new project into the solution

        -> Right-click on the solution
		    -> Add
			    -> New Project

8) Select C# .NET Class Library template
9) Name it **NixiTestTools** and keep the default path
10) Choose the same framework as 5th point
11) Click on create button, you now have 2 projects in the solution Nixi :
 - Nixi
 - NixiTestTools

### Clone repository to get source code

12) Create a temporary folder somewhere (like on your desktop)
13) Open a command line

	13.1 Go to this temporary folder using command line : 

		> cd TEMPORARY_FOLDER_PATH
	
    13.2 Clone the project from github using command line :

		> git clone https://github.com/f-antoine/Nixi.git

14) Copy everything that is contained in the **TEMPORARY_FOLDER_PATH\Nixi\Assets\Nixi** folder into **PROJECT_PATH\Nixi** folder
15) Copy everything that is contained in the **TEMPORARY_FOLDER_PATH\Nixi\Assets\NixiTestTools** folder into **PROJECT_PATH\NixiTestTools** folder
	> No need to remove .meta files, they came with the Unity project and don't affect anything in Visual Studio

### Add references

16) Find UnityEngine.dll on your computer, it is located into your Unity installation folder, for me it was :
	
    **C:\Program Files\Unity\Editor\Data\Managed\UnityEngine.dll**
	> You can refer to this link to help you to find it :<br/>
		https://gamedev.stackexchange.com/questions/103302/where-are-the-files-unityengine-dll-and-unityeditor-dll-located-on-a-windows-fil

17) In Nixi Solution

        -> Right click on Nixi project
	        -> Add
		        -> Project Reference
			        -> Browse to link your UnityEngine.dll and validate

18) Still in Nixi Solution
	
        -> Right click on NixiTestTools project
	        -> Add
		        -> Project Reference
			        -> Browse to link your UnityEngine.dll and validate

19) Still in Nixi Solution
	
        -> Right click on NixiTestTools project
	        -> Add
		        -> Project Reference
			        -> In Project tab select Nixi project (from this solution) and validate

### Build dll

20) On the top part of Visual Studio, change Debug into Release mode
21) Right click on NixiTestTools project and click on **Set as StartUp project**
22) In Menu bar click on **Build** then click on **Build solution**
23) If the build is successful you can see it in the output and you can also find the two dlls with their locations :
    
	- **PROJECT_PATH\NixiTestTools\bin\release\netstandard2.0\Nixi.dll**

	- **PROJECT_PATH\NixiTestTools\bin\release\netstandard2.0\NixiTestTools.dll**

24) You can now copy them into your Unity project and use them (see [Install DLLs part](#install-dlls))
    > If you want to have XML Documentation (summaries) with these DLLs, you can refer to :
https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/x4sa0ak0(v=vs.100)?redirectedfrom=MSDN

## Install DLLs

Once you have downloaded your DLLs, you can add them to your Unity project with a file tree like :

    Assets\
            Plugins\
                    Nixi\
                        Nixi.dll
                        Nixi.xml // Optional : Class summaries
                        NixiTestTools.dll
                        NixiTestTools.xml // Optional : Class summaries


> If it doesn't work by default and/or if you have some issue using it in Unity.
> 
> It might be because you need to change something in your assembly definitions, if so, you can check this link :
> 
> https://docs.unity3d.com/Manual/ScriptCompilationAssemblyDefinitionFiles.html

## Check installation

1) Create a cube in your scene.
2) Create a script named CubeColorChanger and paste this code into it :
```cs
using Nixi.Injections;
using UnityEngine;

public class CubeColorChanger : MonoBehaviourInjectable
{
    [NixInjectComponent]
    public MeshRenderer CubeRenderer;

    void Start()
    {
        CubeRenderer.material.color = Color.red;
    }
}
```
3) Add this CubeColorChanger script to your cube.
4) Play the scene.
5) Nixi is correctly installed, if all these conditions are met :
   - There is no error.
   - The cube is red.
   - The CubeColorChanger component attached to the cube has the CubeRenderer variable filled with its own reference : *Cube (Mesh Renderer)*.

# How to use

After installation, you can check the [**Documentation.md**](Documentation.md) file (or check this github wiki) to know how to use this library.